{"version":3,"file":"todo-view.js","sources":["js/todo-view.js"],"sourcesContent":["const KEYCODE_ENTER = 13;\n\nconst SORT_OF = {\n  TITLE: 1,\n  TITLE_REVERSE: 2,\n  TIME: 3\n};\n\nclass ToDoView {\n\n  constructor() {\n    this.taskListRender = [];\n    this.currentSort = SORT_OF.TIME;\n    this.toDo = document.querySelector('.todo');\n    this.toDoList = this.toDo.querySelector('.todo__list');\n    this.taskInput = this.toDo.querySelector('.todo__input');\n    this.addTaskBtn = this.toDo.querySelector('.todo__addbtn');\n    this.radioTitleSort = document.getElementById('sort-title');\n    this.radioTimeSort = document.getElementById('sort-time');\n    this.radioTitleReverseSort = document.getElementById('sort-title-reverse');\n    this.taskTemplate = document.getElementById('task-template');\n    this.taskInput.addEventListener('input', () => this.changeInputHandler());\n    this.addTaskBtn.addEventListener('click', () => this.clickNewTaskHandler());\n    this.taskInput.addEventListener('keypress', (evt) => this.pressEnterHandler(evt));\n    this.radioTitleSort.addEventListener('click', () => this.sortOfTitle());\n    this.radioTimeSort.addEventListener('click', () => this.sortOfTime());\n    this.radioTitleReverseSort.addEventListener('click', () => this.sortOfTitle(true));\n  }\n\n  addTask(id, taskObj) {\n    const task = document.importNode(this.taskTemplate.content, true);\n\n    const taskDomElement = {\n      id,\n      time: taskObj.time,\n      mainElement: task.querySelector('.todo__task'),\n      textTask: task.querySelector('.todo__text-task'),\n      deleteBtn: task.querySelector('.todo__deltask'),\n      completeBtn: task.querySelector('.todo__checktask')\n    };\n\n    taskDomElement.textTask.value = taskObj.title;\n    if (taskObj.complete) taskDomElement.mainElement.classList.add('todo__task--complete');\n    taskDomElement.deleteBtn.addEventListener('click', () => this.clickDeleteHandler(taskDomElement));\n    taskDomElement.completeBtn.addEventListener('click', () => this.clickCompletekHandler(taskDomElement));\n    taskDomElement.textTask.addEventListener('blur', () => this.blurTaskInputHandler(taskDomElement));\n    this.addTaskInDOM(taskDomElement);\n  }\n\n  addTaskInDOM(taskDomElement) {\n    switch (this.currentSort) {\n      case SORT_OF.TIME:\n        this.insertForTimeSort(taskDomElement)\n        return;\n      case SORT_OF.TITLE:\n        this.insertForTitleSort(taskDomElement);\n        break;\n      case SORT_OF.TITLE_REVERSE:\n        this.insertForTitleSort(taskDomElement, true);\n        break;\n      default:\n        this.taskListRender.push(taskDomElement);\n        this.toDoList.appendChild(taskDomElement.mainElement);\n    }\n  }\n\n\n  renderTaskList(taskList) {\n    const fragment = document.createDocumentFragment();\n    taskList.forEach((task) => fragment.appendChild(task.mainElement));\n    this.toDoList.innerHTML = '';\n    this.toDoList.appendChild(fragment);\n  }\n\n  insertForTitleSort(taskDomElement, reverse = false) {\n    const compareResult = reverse ? -1 : 1;\n    for(let i = 0; i < this.taskListRender.length; i++) {\n      if (this.taskListRender[i].textTask.value.localeCompare(taskDomElement.textTask.value) === compareResult) {\n        this.toDoList.insertBefore(taskDomElement.mainElement, this.taskListRender[i].mainElement);\n        this.taskListRender.splice(i, 0, taskDomElement);\n        return;\n      }\n    }\n\n    this.taskListRender.push(taskDomElement);\n    this.toDoList.appendChild(taskDomElement.mainElement);\n  }\n\n  insertForTimeSort(taskDomElement) {\n    this.toDoList.appendChild( taskDomElement.mainElement);\n    this.taskListRender.unshift(taskDomElement);\n  }\n\n  sortOfTitle(reverse = false) {\n    this.currentSort = reverse ? SORT_OF.TITLE_REVERSE : SORT_OF.TITLE;\n    let sortFunction;\n    if (reverse) {\n      sortFunction = (task1, task2) => task2.textTask.value.localeCompare(task1.textTask.value);\n    } else {\n      sortFunction = (task1, task2) => task1.textTask.value.localeCompare(task2.textTask.value);\n    }\n    this.taskListRender.sort(sortFunction);\n    this.renderTaskList(this.taskListRender);\n  }\n\n  sortOfTime() {\n    this.currentSort = SORT_OF.TIME;\n    this.taskListRender.sort((task1, task2) => {\n      return task1.time - task2.time;\n    });\n    this.renderTaskList(this.taskListRender);\n  }\n\n  clickDeleteHandler(taskDomElement) {\n    this.toDoList.removeChild(taskDomElement.mainElement);\n    this.taskListRender.splice(this.taskListRender.indexOf(taskDomElement), 1);\n    this.onClickDelete(taskDomElement.id);\n  }\n\n  clickCompletekHandler(taskDomElement) {\n    if (taskDomElement.mainElement.classList.contains('todo__task--complete')) {\n      taskDomElement.mainElement.classList.remove('todo__task--complete');\n      this.onClickComplete(taskDomElement.id, false);\n    } else {\n      taskDomElement.mainElement.classList.add('todo__task--complete');\n      this.onClickComplete(taskDomElement.id, true);\n    }\n\n  }\n\n  clickNewTaskHandler() {\n    this.onClickAddNewTask(this.taskInput.value.trim());\n    this.addTaskBtn.setAttribute('disabled', 'disabled');\n    this.taskInput.value = '';\n  }\n\n  changeInputHandler() {\n    if (this.taskInput.value === '') {\n      this.addTaskBtn.setAttribute('disabled', 'disabled');\n    } else {\n      this.addTaskBtn.removeAttribute('disabled');\n    }\n  }\n\n  pressEnterHandler(evt) {\n    if (evt.keyCode === KEYCODE_ENTER && this.taskInput.value !== '') this.clickNewTaskHandler();\n  }\n\n  blurTaskInputHandler(taskDomElement) {\n    if (taskDomElement.textTask.value === '') {\n      this.clickDeleteHandler(taskDomElement);\n    } else {\n      this.onEditTask(taskDomElement.id, taskDomElement.textTask.value);\n    }\n  }\n\n  onClickDelete(id) {\n  }\n\n  onClickComplete(id) {\n  }\n\n  onClickAddNewTask(title) {\n  }\n\n  onEditTask(id, title) {\n  }\n\n}\n\nexport default ToDoView;\n"],"names":[],"mappings":"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"}